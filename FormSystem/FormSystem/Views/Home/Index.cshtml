@{
    ViewBag.Title = "首頁";
}

<!--Script-->
<script>
    var currentPage = 1;
    var maxPageNum = 0;
    var hideByPager = function (pager) {
        // Reset page
        $('.table tbody tr').hide();

        // hide rows
        for (var i = pager * 2 - 1; i <= pager * 2; i++) {
            $(`.table tbody tr:nth-child(${i})`).show(); 
        }

        // set current Page
        currentPage = pager;

        // set pager active
        $("li").toggleClass('active', false);
        $(`li:nth-child(${pager + 1})`).toggleClass('active', true);

        // set prvious button enable or disable
        if (currentPage == 1) {
            $('li:first').toggleClass('disabled', true);
        }
        else {
            $('li:first').toggleClass('disabled', false);
        }

        // set next button enable or disable
        if (currentPage == maxPageNum) {
            $('li:last').toggleClass('disabled', true);
        }
        else {
            $('li:last').toggleClass('disabled', false);
        }
    };
    var nextOrPrivous = function (type) {
        if (type === 'pre') {hideByPager(currentPage - 1); }
        if (type === 'next') {hideByPager(currentPage + 1); }
    };
    $(document).ready(function () {
        // Get All Questions List HTML
        $.ajax({
            type: 'Get',
            url: '@Url.Action("ShowQuestionsTable")',
            success: function (result) {
                // form table
                $('#ListTBody').append(result['ShowFormsHTML']);
                // pagination
                var pageHtml =
                    `<li class="page-item">
                        <a class="page-link" href="#" onclick="nextOrPrivous('pre')">上一頁</a>
                    </li>
                    ${result['PagniationHTML']}
                    <li class="page-item">
                        <a class="page-link" href="#" onclick="nextOrPrivous('next')">下一頁</a>
                    </li>`;
                $("#paginationArea").append(pageHtml);
                // set Page
                hideByPager(1);
                currentPage = 1;
                maxPageNum = result['MaxPage'];
            }
        });
    });
</script>
<!--Title-->
<div class="jumbotron">
    <h1>問卷系統 - 首頁</h1>
    <p class="lead">歡迎使用動態問卷系統，使用搜尋功能快速找到需要的問卷表單</p>
    <p class="lead">如需後台功能，請先登入管理員帳號</p>
</div>
<hr />
<!--Search Area-->
<div class="container">
    <div class="row row-cols-3">
        <div class="col">
            <input class="form-control me-2" type="search" placeholder="搜尋問卷標題" aria-label="Search">
        </div>
        <div class="col"></div>
        <div class="col"></div>
        <div class="col">
            開始時間:
            <input class="form-control me-2" type="date">
        </div>
        <div class="col">
            結束時間:
            <input class="form-control me-2" type="date" placeholder="結束時間" aria-label="Search">
        </div>
        <div class="col">
            <button class="btn btn-outline-success" type="submit">Search</button>
        </div>
    </div>
</div>
<hr />
<!--Form List-->
<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">問卷名稱</th>
            <th scope="col">狀態</th>
            <th scope="col">開始時間</th>
            <th scope="col">結束時間</th>
            <th scope="col">觀看統計</th>
        </tr>
    </thead>
    <tbody id="ListTBody">
        <!--Put List Here-->
    </tbody>
</table>
<!--Pagination-->
<nav aria-label="Index Page navigation">
    <ul class="pagination" id="paginationArea">
        <!--Put pagination here-->
    </ul>
</nav>
